#!/bin/env bash

values_dotfile="$HOME/.tmp_values.json"

if [[ -f $values_dotfile ]]; then
    a=$(jq '. += {"target": "0.0.0.0"}' $values_dotfile)
    echo $a | jq '.' > $values_dotfile
else
    echo 'file was not created'
fi

if [[ $1 =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ ]];
then
    inplace jq ".target = \"$1\"" $values_dotfile

    #case $EUID in
        #"0") sed -i "1s/.*/export target=$1/" ~/.pentest_values; sed -i "1s/.*/export target=$1/" /home/*/.pentest_values;;
        #*) sed -i "1s/.*/export target=$1/" ~/.pentest_values;;
    #esac
else
    echo "You should specify IPv4 address"
    exit 1
fi

#if [[ $1 =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ ]];
#then
	#case $EUID in
		#"0") sed -i "1s/.*/export target=$1/" ~/.pentest_values; sed -i "1s/.*/export target=$1/" /home/*/.pentest_values;;
		#*) sed -i "1s/.*/export target=$1/" ~/.pentest_values;;
	#esac
#else
    #echo "You should specify IPv4 address"
    #exit 1
#fi
